{% extends "project/base.html" %}
{% block content %}
    {% if questions_list %}
        <ul class="questions-list">
            {% for question in questions_list %}
                {% with answers=question.answer_set %}
                    <li class="question-card">
                        <h2 class="question-title">{{ question.title }}</h2>
                        <p class="question-preview">{{ question.body }}</p>
                        <p class="question-info">asked by <span class="question-author">{{ question.author }}</span> on {{ question.published|date:"F d, Y - H:i"}}</p>
                        <p class="question-info">
                            {% if answers.count %}
                                has {{ answers.count }} answer{{ answers.count|pluralize }} given by:
                                {% for answer in answers.all %}
                                    {% if forloop.counter == answers.all.count %}
                                        <span class="answer-author">{{ answer.author.username }}</span>
                                    {% else %}
                                        <span class="answer-author">{{ answer.author.username }}</span>,
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                has 0 answers
                            {% endif %}
                        </p>
                    </li>
                {% endwith %}
            {% endfor %}
        </ul>
    {% else %}
        <p class="empty-questions-list">No questions are available.</p>
    {% endif %}
{% endblock content %}